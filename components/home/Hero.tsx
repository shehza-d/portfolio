"use client";
import { useEffect } from "react";
import { MdOutlineKeyboardDoubleArrowDown } from "react-icons/md";

export default function Hero() {

  useEffect(() => {
    const path = document.querySelector<SVGElement>(".svgPath")!;
    const container = document.querySelector<HTMLDivElement>("#svg_container")!;



    /* @ts-ignore*/
    const pathLength = path.getTotalLength();

    path.style.strokeDasharray = `${pathLength} ${pathLength}`;
    path.style.strokeDashoffset = pathLength;

    const handleScroll = () => {
      // what % down it is
      const scrollPercentage =
        container.scrollTop / (container.scrollHeight - container.clientHeight);


      // (document.documentElement.scrollTop + document.body.scrollTop) /
      //   (document.documentElement.scrollHeight - document.documentElement.clientHeight);

      // (document.documentElement.scrollTop + document.body.scrollTop) /
      //   (document.documentElement.scrollHeight - document.documentElement.clientHeight);



      console.log(`ðŸš€ ~ file: Hero.tsx:22 ~ handleScroll ~ scrollPercentage:`, scrollPercentage)
      // length to offset the dashes
      const drawLength = pathLength * scrollPercentage;
      // draw in reverse
      path.style.strokeDashoffset = `${pathLength - drawLength}`;
    };

    container.addEventListener("scroll", handleScroll);

    return () => {
      container.removeEventListener("scroll", handleScroll);
    };
  },


    []);

  // const container = document.querySelector<HTMLDivElement>("#svg_container")!;

  // document.querySelector('.post')?.addEventListener('scroll', function () {

  //   var currY = container.scrollTop;
  //   var postHeight = container.height();
  //   var scrollHeight = document.querySelector('.content').height();
  //   var scrollPercent = (currY / (scrollHeight - postHeight)) * 100;

  //   document.querySelector('.bar-long').css('width', scrollPercent + "%");
  // });


  return (
    <div id="svg_container" className="flex h-[100vh] bg-purple-500 overflow-y-auto">
      <div className="absolute top-1 left-1/2 flex flex-col items-center text-lg font-extralight">
        SCROLL
        <MdOutlineKeyboardDoubleArrowDown className="animate-bounce text-3xl" />
      </div>
      <div className="h-[400vh] bg-red-400 w-full overflow-y-scroll">
        <div className="absolute top-[30vh] left-0  w-full ">
          {/* <svg
          className="stroke-accent stroke-2"
          viewBox="0 0 393 87"
          fill="none"
          preserveAspectRatio="xMidYMax meet"
          strokeDashoffset={993.856}
          strokeDasharray={993.856}
        >
          <path
            classNameh="svgPath"
            d="M0 56C34.3333 56 68.6667 56 103 56C103.736 56 105.252 56.2966 105.889 56C107.009 55.4785 106.938 53.9095 107.167 53C107.823 50.3866 108.358 47.1354 110.5 45.1667C114.158 41.8037 121.121 40.2178 125.333 38.8889C135.395 35.715 139.157 34.9382 148.889 30.8889C157.522 27.2966 165.25 22.5597 172.111 16.2222C174.365 14.1405 179.662 9.60184 179.944 6.11112C180.535 -1.1891 161.42 4.32364 160.111 4.83335C148.948 9.18162 131.9 21.9296 143.611 34.2222C146.8 37.5697 149.455 38.3555 151.278 42.9445C153.564 48.6992 152.866 54.1494 151.083 60C147.34 72.2836 138.107 83.5847 124.722 85.25C121.521 85.6484 113.759 82.9555 116.139 80.7778C117.488 79.5438 122.283 78.3822 123.167 78.1389C133.512 75.2901 141.143 72.0755 149.5 64.7222C164.188 51.7991 175.839 35.7338 187.944 20.5C194.342 12.4494 187.698 24.7398 187.111 25.9445C182.615 35.1646 177.585 44.1351 173.389 53.5C171.665 57.3481 171.457 58.1179 170.167 61.7222C170.037 62.0835 170.049 63.0769 169.778 62.8056C169.468 62.4953 169.815 61.9191 169.944 61.5C170.336 60.2349 170.713 58.948 171.333 57.7778C174.926 50.9965 181.846 45.8115 189.583 44.9167C195.599 44.221 196.318 49.3552 195.639 54.1111C195.355 56.0986 193.422 60.1637 195.75 62.1667C199.932 65.7651 209.999 65.3645 213.917 65.2222C222.764 64.9009 230.642 63.9123 238.667 60.0833C239.871 59.5089 247.124 55.6645 246 51.9167C244.913 48.293 237.142 50.9333 236.556 51.1389C230.654 53.2067 227.03 55.9654 223.333 60.9722C222.187 62.5243 218.735 67.8946 220.417 70.7778C222.05 73.5776 228.443 71.5526 229.611 71.2778C240.954 68.6088 251.11 63.1128 257.833 53.3889C266.292 41.1547 270.571 26.1569 275.444 12.2778C275.929 10.8984 276.401 9.51237 276.972 8.16668C277.236 7.54497 277.38 6.01833 277.944 6.3889C278.603 6.82098 277.977 7.97104 277.861 8.75001C277.494 11.2182 277.014 13.6693 276.5 16.1111C272.837 33.5237 268.434 50.8305 263 67.7778C262.022 70.8287 260.606 73.7383 259.778 76.8333C259.162 79.1344 262.091 72.6643 263.389 70.6667C267.261 64.706 271.478 58.6818 276.5 53.6111C277.277 52.8266 289.219 41.0463 292.472 44.9167C294.826 47.7173 291.143 52.1804 289.667 55.5278C288.026 59.2485 285.374 64.3989 283.778 68.3611C282.635 71.1982 282.177 72.2393 285.167 71.3611C320.079 61.1072 356.611 54.0216 393 52"
            strokeLinecap="round"
          />
        </svg> */}
          <svg
            preserveAspectRatio="xMidYMax meet"
            className="stroke-accent stroke-2"
            viewBox="0 0 1048 202" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              className="svgPath"

              d="M2 118C19.7054 118 37.8197 119.382 55.4444 117.889C84.1673 115.456 111.104 105.628 134.889 89.2222C147.78 80.331 165.69 64.3714 175.778 52.4445C180.914 46.3717 209.016 13.4564 190.389 3.94447C179.341 -1.69682 163.464 8.54309 156.056 13.7222C145.436 21.1457 136.077 30.4792 131.444 42.8334C126.152 56.9456 135.469 72.0049 138 85.7222C145.94 128.754 129.654 177.178 88.2222 196.111C76.5454 201.447 65.3835 201.254 57.8889 190.889C56.6765 189.212 55.619 188.208 58.1111 188C66.4245 187.307 74.5304 182.832 82.1667 179.889C103.238 171.769 123.882 163.286 143.389 151.778C172.682 134.497 194.581 110.739 215.222 84C226.555 69.3189 237.187 54.031 246.889 38.2222C251.698 30.3854 266.793 7.56859 260.389 14.1667C238.116 37.1143 215.566 58.7135 196.167 84.2778C187.05 96.2917 176.729 107.278 167.556 119.222C163.628 124.337 162.195 126.826 158.722 132.111C156.842 134.972 151.144 141.158 150.667 144.889C150.37 147.205 155.563 145.679 157.667 144.667C166.378 140.473 177.591 132.595 185.222 127.444C194.394 121.254 204.278 113.972 214.111 108.667C219.382 105.822 228.057 101.416 234.611 102.444C239.564 103.221 237.76 114.781 237.389 117.5C235.79 129.225 229.823 137.085 223.556 146.556C221.339 149.905 219.567 153.422 217.778 157C217.753 157.049 216.717 158.777 217.444 158.556C221.259 157.395 225.587 151.512 228.333 149.111C241.48 137.616 255.616 128.048 273.056 124.667C283.997 122.545 299.629 124.588 306.833 114C308.505 111.543 314.192 96.1883 308.222 94.6667C299.79 92.5173 287.006 99.1632 280.667 103.778C270.287 111.333 265.514 122.83 265.167 135.333C265.082 138.389 264.857 141.07 268.111 142C273.07 143.417 276.661 147.595 280.444 150.889C283.266 153.345 287.819 159.295 292.111 157.222C300.375 153.233 309.82 148.28 317.111 142.667C328.565 133.848 336.265 118.443 342.222 105.889C353.54 82.0379 360.446 56.8718 369.056 32.0556C379.025 3.31942 351.135 90.2327 340.333 118.667C337.52 126.072 333.928 133.286 332 141C331.686 142.258 330.678 147.168 331.222 142C332.695 128.006 335.973 114.326 350.833 110.611C359.97 108.327 378.149 101.828 386.111 108.333C387.79 109.705 390.282 114.914 388.889 117.111C387.107 119.92 382.456 118.777 380.5 122.5C377.18 128.819 376.271 136.653 375.167 143.611C375.1 144.033 373.303 149.491 374.389 146.667C375.543 143.665 377.808 143.3 380.278 141.889C384.013 139.754 386.679 133.502 389.889 130.556C396.935 124.089 404.74 121.877 413.889 120C425.417 117.635 434.121 111.608 444.667 106.667C452.275 103.102 460.678 99.0711 469.167 98.2222C471.305 98.0085 485.7 98.4908 485 99.1111C479.91 103.625 473.175 106.68 467.778 110.889C458.443 118.169 449.868 126.243 440.111 133C431.396 139.036 423.172 144.626 416 152.556C408.988 160.308 415.779 159.191 423.056 158.833C435.357 158.228 447.132 155.713 459.222 154.222C462.884 153.771 463.358 154.101 464.222 150.333C466.969 138.365 476.011 132.31 487.111 128.333C497.323 124.675 508.106 123.16 518.556 120.389C527.1 118.123 535.047 114.191 543.833 112.833C545.757 112.536 560.58 111.037 547.556 112.278C536.228 113.357 525.534 117.144 515.889 123.222C508.041 128.168 503.741 134.823 501.444 143.778C499.832 150.066 496.487 162.751 504 166.889C515.366 173.148 535.117 166.141 539.722 154.278C542.074 148.22 540.673 141 541.167 134.667C541.585 129.296 543.197 124.174 545.111 119.167C545.202 118.93 542.347 128.332 541.722 130.667C538.974 140.943 542.118 151.613 544.667 161.667C545.54 165.11 547.667 170.672 550.667 164.778C556.147 154.009 557.42 142.613 566 133.167C573.845 124.53 584.063 122.524 595 120.444C605.807 118.39 616.637 114.552 627.667 114C629.923 113.887 636.704 114 634.444 114C628.185 114 621.926 114 615.667 114C602.242 114 585.403 115.204 580.167 130.389C576.28 141.661 572.732 164.319 587.333 169.556C594.436 172.103 602.671 172.072 610.111 172C622.091 171.884 625.744 167.036 630.444 156C637.346 139.796 638.361 123.137 639.556 105.778C640.951 85.5141 643.428 65.4859 645.889 45.3334C647.183 34.7348 651.776 3.03169 650.333 13.6111C649.589 19.0705 647.922 24.3657 646.889 29.7778C643.634 46.8324 642.318 63.7661 642 81.1111C641.618 101.934 641.38 123.06 642.111 143.889C642.265 148.28 641.532 156.476 646.556 158.778C652.338 161.428 661.617 160.723 664.667 154.333C667.575 148.24 664.879 134.872 670.222 130.556C673.673 127.768 675.595 122 680.611 122C686.037 122 691.463 122 696.889 122C701.621 122 707.666 122.956 712.222 121.333C715.378 120.209 712.675 116.213 712 114.333C709.861 108.374 709.423 102.03 707.444 96C704.833 88.0412 701.831 80.5143 702 72C702.199 61.9632 716.999 60.5532 724.111 65.1667C730.202 69.1178 727.473 79.1853 728 85.1111C728.469 90.3913 731.749 72.7243 737 72C745.665 70.8048 751.467 69.2904 758.556 75.8334C764.602 81.4145 749.628 90.0503 745.667 91.5556C740.647 93.4632 735.739 92.5893 734 99.1111C732.328 105.381 728.256 110.406 725.611 116.333C722.793 122.649 719.557 124.967 728.778 125.333C734.476 125.559 739.101 122.635 744.556 121.667C750.369 120.634 756.747 120.696 762.556 120.889C782.377 121.548 802.152 123.664 821.944 124.833C896.459 129.236 971.379 128.605 1046 130"
              stroke="black" strokeLinecap="round" />
          </svg>
        </div>

      </div>
    </div>
  );
}
