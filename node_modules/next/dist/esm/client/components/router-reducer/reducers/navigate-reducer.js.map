{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/navigate-reducer.ts"],"names":["CacheStates","fetchServerResponse","createRecordFromThenable","readRecordValue","createHrefFromUrl","fillLazyItemsTillLeafWithHead","fillCacheWithNewSubTreeData","invalidateCacheBelowFlightSegmentPath","fillCacheWithDataProperty","createOptimisticTree","applyRouterStatePatchToTree","shouldHardNavigate","isNavigatingToNewRootLayout","handleMutable","state","mutable","canonicalUrl","pushRef","pendingPush","mpaNavigation","focusAndScrollRef","apply","applyFocusAndScroll","cache","prefetchCache","tree","patchedTree","applyFlightData","flightDataPath","treePatch","subTreeData","head","slice","length","status","READY","handleExternalUrl","url","previousTree","navigateReducer","action","isExternalUrl","locationSearch","navigateType","forceOptimisticNavigation","pathname","search","href","isForCurrentTree","JSON","stringify","toString","prefetchValues","get","flightData","newTree","canonicalUrlOverride","flightSegmentPath","applied","hardNavigate","segments","split","push","optimisticTree","res","bailOptimistic","data","Error"],"mappings":"AAAA,SAEEA,WAAW,QACN,2CAA2C,CAAA;AAKlD,SAASC,mBAAmB,QAAQ,0BAA0B,CAAA;AAC9D,SAASC,wBAAwB,QAAQ,gCAAgC,CAAA;AACzE,SAASC,eAAe,QAAQ,sBAAsB,CAAA;AACtD,SAASC,iBAAiB,QAAQ,yBAAyB,CAAA;AAC3D,SAASC,6BAA6B,QAAQ,wCAAwC,CAAA;AACtF,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AACjF,SAASC,qCAAqC,QAAQ,8CAA8C,CAAA;AACpG,SAASC,yBAAyB,QAAQ,kCAAkC,CAAA;AAC5E,SAASC,oBAAoB,QAAQ,2BAA2B,CAAA;AAChE,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AACjF,SAASC,kBAAkB,QAAQ,yBAAyB,CAAA;AAC5D,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AAQjF,OAAO,SAASC,aAAa,CAC3BC,KAA2B,EAC3BC,OAAgB,EACF;IACd,OAAO;QACL,YAAY;QACZC,YAAY,EACV,OAAOD,OAAO,CAACC,YAAY,KAAK,WAAW,GACvCD,OAAO,CAACC,YAAY,KAAKF,KAAK,CAACE,YAAY,GACzCF,KAAK,CAACE,YAAY,GAClBD,OAAO,CAACC,YAAY,GACtBF,KAAK,CAACE,YAAY;QACxBC,OAAO,EAAE;YACPC,WAAW,EACT,OAAOH,OAAO,CAACG,WAAW,KAAK,WAAW,GACtCH,OAAO,CAACG,WAAW,GACnBJ,KAAK,CAACG,OAAO,CAACC,WAAW;YAC/BC,aAAa,EACX,OAAOJ,OAAO,CAACI,aAAa,KAAK,WAAW,GACxCJ,OAAO,CAACI,aAAa,GACrBL,KAAK,CAACG,OAAO,CAACE,aAAa;SAClC;QACD,kEAAkE;QAClEC,iBAAiB,EAAE;YACjBC,KAAK,EACH,OAAON,OAAO,CAACO,mBAAmB,KAAK,WAAW,GAC9CP,OAAO,CAACO,mBAAmB,GAC3BR,KAAK,CAACM,iBAAiB,CAACC,KAAK;SACpC;QACD,eAAe;QACfE,KAAK,EAAER,OAAO,CAACQ,KAAK,GAAGR,OAAO,CAACQ,KAAK,GAAGT,KAAK,CAACS,KAAK;QAClDC,aAAa,EAAEV,KAAK,CAACU,aAAa;QAClC,8BAA8B;QAC9BC,IAAI,EACF,OAAOV,OAAO,CAACW,WAAW,KAAK,WAAW,GACtCX,OAAO,CAACW,WAAW,GACnBZ,KAAK,CAACW,IAAI;KACjB,CAAA;CACF;AAED,OAAO,SAASE,eAAe,CAC7Bb,KAA2B,EAC3BS,KAAgB,EAChBK,cAA8B,EACrB;IACT,0DAA0D;IAC1D,MAAM,CAACC,SAAS,EAAEC,WAAW,EAAEC,IAAI,CAAC,GAAGH,cAAc,CAACI,KAAK,CAAC,CAAC,CAAC,CAAC;IAE/D,8FAA8F;IAC9F,IAAIF,WAAW,KAAK,IAAI,EAAE;QACxB,OAAO,KAAK,CAAA;KACb;IAED,IAAIF,cAAc,CAACK,MAAM,KAAK,CAAC,EAAE;QAC/BV,KAAK,CAACW,MAAM,GAAGlC,WAAW,CAACmC,KAAK;QAChCZ,KAAK,CAACO,WAAW,GAAGA,WAAW;QAC/BzB,6BAA6B,CAACkB,KAAK,EAAET,KAAK,CAACS,KAAK,EAAEM,SAAS,EAAEE,IAAI,CAAC;KACnE,MAAM;QACL,mDAAmD;QACnDR,KAAK,CAACW,MAAM,GAAGlC,WAAW,CAACmC,KAAK;QAChCZ,KAAK,CAACO,WAAW,GAAGhB,KAAK,CAACS,KAAK,CAACO,WAAW;QAC3C,oEAAoE;QACpExB,2BAA2B,CAACiB,KAAK,EAAET,KAAK,CAACS,KAAK,EAAEK,cAAc,CAAC;KAChE;IAED,OAAO,IAAI,CAAA;CACZ;AAED,OAAO,SAASQ,iBAAiB,CAC/BtB,KAA2B,EAC3BC,OAAgB,EAChBsB,GAAW,EACXnB,WAAoB,EACpB;IACAH,OAAO,CAACuB,YAAY,GAAGxB,KAAK,CAACW,IAAI;IACjCV,OAAO,CAACI,aAAa,GAAG,IAAI;IAC5BJ,OAAO,CAACC,YAAY,GAAGqB,GAAG;IAC1BtB,OAAO,CAACG,WAAW,GAAGA,WAAW;IACjCH,OAAO,CAACO,mBAAmB,GAAG,KAAK;IAEnC,OAAOT,aAAa,CAACC,KAAK,EAAEC,OAAO,CAAC,CAAA;CACrC;AAED,OAAO,SAASwB,eAAe,CAC7BzB,KAA2B,EAC3B0B,MAAsB,EACR;IACd,MAAM,EACJH,GAAG,CAAA,EACHI,aAAa,CAAA,EACbC,cAAc,CAAA,EACdC,YAAY,CAAA,EACZpB,KAAK,CAAA,EACLR,OAAO,CAAA,EACP6B,yBAAyB,CAAA,IAC1B,GAAGJ,MAAM;IACV,MAAM,EAAEK,QAAQ,CAAA,EAAEC,MAAM,CAAA,EAAE,GAAGT,GAAG;IAChC,MAAMU,IAAI,GAAG3C,iBAAiB,CAACiC,GAAG,CAAC;IACnC,MAAMnB,WAAW,GAAGyB,YAAY,KAAK,MAAM;IAE3C,MAAMK,gBAAgB,GACpBC,IAAI,CAACC,SAAS,CAACnC,OAAO,CAACuB,YAAY,CAAC,KAAKW,IAAI,CAACC,SAAS,CAACpC,KAAK,CAACW,IAAI,CAAC;IAErE,IAAIuB,gBAAgB,EAAE;QACpB,OAAOnC,aAAa,CAACC,KAAK,EAAEC,OAAO,CAAC,CAAA;KACrC;IAED,IAAI0B,aAAa,EAAE;QACjB,OAAOL,iBAAiB,CAACtB,KAAK,EAAEC,OAAO,EAAEsB,GAAG,CAACc,QAAQ,EAAE,EAAEjC,WAAW,CAAC,CAAA;KACtE;IAED,MAAMkC,cAAc,GAAGtC,KAAK,CAACU,aAAa,CAAC6B,GAAG,CAACN,IAAI,CAAC;IACpD,IAAIK,cAAc,EAAE;QAClB,0DAA0D;QAC1D,MAAM,EAAEE,UAAU,CAAA,EAAE7B,IAAI,EAAE8B,OAAO,CAAA,EAAEC,oBAAoB,CAAA,EAAE,GAAGJ,cAAc;QAE1E,4DAA4D;QAC5D,IAAI,OAAOE,UAAU,KAAK,QAAQ,EAAE;YAClC,OAAOlB,iBAAiB,CAACtB,KAAK,EAAEC,OAAO,EAAEuC,UAAU,EAAEpC,WAAW,CAAC,CAAA;SAClE;QAED,IAAIqC,OAAO,KAAK,IAAI,EAAE;YACpB,IAAI3C,2BAA2B,CAACE,KAAK,CAACW,IAAI,EAAE8B,OAAO,CAAC,EAAE;gBACpD,OAAOnB,iBAAiB,CAACtB,KAAK,EAAEC,OAAO,EAAEgC,IAAI,EAAE7B,WAAW,CAAC,CAAA;aAC5D;YAED,2GAA2G;YAC3G,MAAMU,cAAc,GAAG0B,UAAU,CAAC,CAAC,CAAC;YACpC,MAAMG,iBAAiB,GAAG7B,cAAc,CAACI,KAAK,CAC5C,CAAC,EACD,CAAC,CAAC,CACH,AAAgC;YAEjC,MAAM0B,OAAO,GAAG/B,eAAe,CAACb,KAAK,EAAES,KAAK,EAAEK,cAAc,CAAC;YAE7D,MAAM+B,YAAY,GAChB,yCAAyC;YACzCb,MAAM,KAAKJ,cAAc,IACzB/B,kBAAkB,CAChB,sBAAsB;YACtB;gBAAC,EAAE;mBAAK8C,iBAAiB;aAAC,EAC1B3C,KAAK,CAACW,IAAI,CACX;YAEH,IAAIkC,YAAY,EAAE;gBAChBpC,KAAK,CAACW,MAAM,GAAGlC,WAAW,CAACmC,KAAK;gBAChC,mDAAmD;gBACnDZ,KAAK,CAACO,WAAW,GAAGhB,KAAK,CAACS,KAAK,CAACO,WAAW;gBAE3CvB,qCAAqC,CACnCgB,KAAK,EACLT,KAAK,CAACS,KAAK,EACXkC,iBAAiB,CAClB;gBACD,8EAA8E;gBAC9E1C,OAAO,CAACQ,KAAK,GAAGA,KAAK;aACtB,MAAM,IAAImC,OAAO,EAAE;gBAClB3C,OAAO,CAACQ,KAAK,GAAGA,KAAK;aACtB;YAEDR,OAAO,CAACuB,YAAY,GAAGxB,KAAK,CAACW,IAAI;YACjCV,OAAO,CAACW,WAAW,GAAG6B,OAAO;YAC7BxC,OAAO,CAACO,mBAAmB,GAAG,IAAI;YAClCP,OAAO,CAACC,YAAY,GAAGwC,oBAAoB,GACvCpD,iBAAiB,CAACoD,oBAAoB,CAAC,GACvCT,IAAI;YACRhC,OAAO,CAACG,WAAW,GAAGA,WAAW;YAEjC,OAAOL,aAAa,CAACC,KAAK,EAAEC,OAAO,CAAC,CAAA;SACrC;KACF;IAED,kFAAkF;IAClF,gGAAgG;IAChG,mHAAmH;IAEnH,4EAA4E;IAC5E,IAAI6B,yBAAyB,EAAE;QAC7B,MAAMgB,QAAQ,GAAGf,QAAQ,CAACgB,KAAK,CAAC,GAAG,CAAC;QACpC,wDAAwD;QACxDD,QAAQ,CAACE,IAAI,CAAC,EAAE,CAAC;QAEjB,wBAAwB;QACxB,kGAAkG;QAClG,MAAMC,cAAc,GAAGtD,oBAAoB,CAACmD,QAAQ,EAAE9C,KAAK,CAACW,IAAI,EAAE,KAAK,CAAC;QAExE,mDAAmD;QACnDF,KAAK,CAACW,MAAM,GAAGlC,WAAW,CAACmC,KAAK;QAChCZ,KAAK,CAACO,WAAW,GAAGhB,KAAK,CAACS,KAAK,CAACO,WAAW;QAE3C,wGAAwG;QACxG,0HAA0H;QAC1H,MAAMkC,GAAG,GAAGxD,yBAAyB,CACnCe,KAAK,EACLT,KAAK,CAACS,KAAK,EACX,0EAA0E;QAC1EqC,QAAQ,CAAC5B,KAAK,CAAC,CAAC,CAAC,EACjB,IAAM/B,mBAAmB,CAACoC,GAAG,EAAE0B,cAAc,CAAC,CAC/C;QAED,gFAAgF;QAChF,IAAI,CAACC,CAAAA,GAAG,QAAgB,GAAnBA,KAAAA,CAAmB,GAAnBA,GAAG,CAAEC,cAAc,CAAA,EAAE;YACxBlD,OAAO,CAACuB,YAAY,GAAGxB,KAAK,CAACW,IAAI;YACjCV,OAAO,CAACW,WAAW,GAAGqC,cAAc;YACpChD,OAAO,CAACG,WAAW,GAAGA,WAAW;YACjCH,OAAO,CAACO,mBAAmB,GAAG,IAAI;YAClCP,OAAO,CAACQ,KAAK,GAAGA,KAAK;YACrBR,OAAO,CAACC,YAAY,GAAG+B,IAAI;YAE3B,OAAOlC,aAAa,CAACC,KAAK,EAAEC,OAAO,CAAC,CAAA;SACrC;KACF;IAED,iHAAiH;IAEjH,8CAA8C;IAC9C,IAAI,CAACQ,KAAK,CAAC2C,IAAI,EAAE;QACf3C,KAAK,CAAC2C,IAAI,GAAGhE,wBAAwB,CAACD,mBAAmB,CAACoC,GAAG,EAAEvB,KAAK,CAACW,IAAI,CAAC,CAAC;KAC5E;IAED,0FAA0F;IAC1F,MAAM,CAAC6B,UAAU,EAAEE,oBAAoB,CAAC,GAAGrD,eAAe,CAACoB,KAAK,CAAC2C,IAAI,CAAE;IAEvE,4DAA4D;IAC5D,IAAI,OAAOZ,UAAU,KAAK,QAAQ,EAAE;QAClC,OAAOlB,iBAAiB,CAACtB,KAAK,EAAEC,OAAO,EAAEuC,UAAU,EAAEpC,WAAW,CAAC,CAAA;KAClE;IAED,2DAA2D;IAC3DK,KAAK,CAAC2C,IAAI,GAAG,IAAI;IAEjB,2GAA2G;IAC3G,MAAMtC,cAAc,GAAG0B,UAAU,CAAC,CAAC,CAAC;IAEpC,0DAA0D;IAC1D,MAAM,CAACzB,SAAS,CAAC,GAAGD,cAAc,CAACI,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAEhD,mEAAmE;IACnE,MAAMyB,iBAAiB,GAAG7B,cAAc,CAACI,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAErD,wEAAwE;IACxE,MAAMuB,OAAO,GAAG7C,2BAA2B,CACzC,sBAAsB;IACtB;QAAC,EAAE;WAAK+C,iBAAiB;KAAC,EAC1B3C,KAAK,CAACW,IAAI,EACVI,SAAS,CACV;IAED,IAAI0B,OAAO,KAAK,IAAI,EAAE;QACpB,MAAM,IAAIY,KAAK,CAAC,kBAAkB,CAAC,CAAA;KACpC;IAED,IAAIvD,2BAA2B,CAACE,KAAK,CAACW,IAAI,EAAE8B,OAAO,CAAC,EAAE;QACpD,OAAOnB,iBAAiB,CAACtB,KAAK,EAAEC,OAAO,EAAEgC,IAAI,EAAE7B,WAAW,CAAC,CAAA;KAC5D;IAEDH,OAAO,CAACC,YAAY,GAAGwC,oBAAoB,GACvCpD,iBAAiB,CAACoD,oBAAoB,CAAC,GACvCT,IAAI;IAERhC,OAAO,CAACuB,YAAY,GAAGxB,KAAK,CAACW,IAAI;IACjCV,OAAO,CAACW,WAAW,GAAG6B,OAAO;IAC7BxC,OAAO,CAACO,mBAAmB,GAAG,IAAI;IAClCP,OAAO,CAACG,WAAW,GAAGA,WAAW;IAEjC,MAAMwC,OAAO,GAAG/B,eAAe,CAACb,KAAK,EAAES,KAAK,EAAEK,cAAc,CAAC;IAC7D,IAAI8B,OAAO,EAAE;QACX3C,OAAO,CAACQ,KAAK,GAAGA,KAAK;KACtB;IAED,OAAOV,aAAa,CAACC,KAAK,EAAEC,OAAO,CAAC,CAAA;CACrC"}