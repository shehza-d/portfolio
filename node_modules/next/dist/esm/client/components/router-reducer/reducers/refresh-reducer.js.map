{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/refresh-reducer.ts"],"names":["fetchServerResponse","createRecordFromThenable","readRecordValue","createHrefFromUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","handleMutable","applyFlightData","handleExternalUrl","refreshReducer","state","action","cache","mutable","origin","href","canonicalUrl","isForCurrentTree","JSON","stringify","previousTree","tree","data","URL","flightData","canonicalUrlOverride","pushRef","pendingPush","flightDataPath","length","console","log","treePatch","newTree","Error","canonicalUrlOverrideHref","undefined","applied","patchedTree"],"mappings":"AAAA,SAASA,mBAAmB,QAAQ,0BAA0B,CAAA;AAC9D,SAASC,wBAAwB,QAAQ,gCAAgC,CAAA;AACzE,SAASC,eAAe,QAAQ,sBAAsB,CAAA;AACtD,SAASC,iBAAiB,QAAQ,yBAAyB,CAAA;AAC3D,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AACjF,SAASC,2BAA2B,QAAQ,qCAAqC,CAAA;AAMjF,SACEC,aAAa,EACbC,eAAe,EACfC,iBAAiB,QACZ,oBAAoB,CAAA;AAE3B,OAAO,SAASC,cAAc,CAC5BC,KAA2B,EAC3BC,MAAqB,EACP;IACd,MAAM,EAAEC,KAAK,CAAA,EAAEC,OAAO,CAAA,EAAEC,MAAM,CAAA,EAAE,GAAGH,MAAM;IACzC,MAAMI,IAAI,GAAGL,KAAK,CAACM,YAAY;IAE/B,MAAMC,gBAAgB,GACpBC,IAAI,CAACC,SAAS,CAACN,OAAO,CAACO,YAAY,CAAC,KAAKF,IAAI,CAACC,SAAS,CAACT,KAAK,CAACW,IAAI,CAAC;IAErE,IAAIJ,gBAAgB,EAAE;QACpB,OAAOX,aAAa,CAACI,KAAK,EAAEG,OAAO,CAAC,CAAA;KACrC;IAED,IAAI,CAACD,KAAK,CAACU,IAAI,EAAE;QACf,uDAAuD;QACvD,wCAAwC;QACxCV,KAAK,CAACU,IAAI,GAAGrB,wBAAwB,CACnCD,mBAAmB,CAAC,IAAIuB,GAAG,CAACR,IAAI,EAAED,MAAM,CAAC,EAAE;YACzCJ,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YACbX,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YACbX,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YACb,SAAS;SACV,CAAC,CACH;KACF;IACD,MAAM,CAACG,UAAU,EAAEC,oBAAoB,CAAC,GAAGvB,eAAe,CAACU,KAAK,CAACU,IAAI,CAAE;IAEvE,4DAA4D;IAC5D,IAAI,OAAOE,UAAU,KAAK,QAAQ,EAAE;QAClC,OAAOhB,iBAAiB,CACtBE,KAAK,EACLG,OAAO,EACPW,UAAU,EACVd,KAAK,CAACgB,OAAO,CAACC,WAAW,CAC1B,CAAA;KACF;IAED,2DAA2D;IAC3Df,KAAK,CAACU,IAAI,GAAG,IAAI;IAEjB,2GAA2G;IAC3G,MAAMM,cAAc,GAAGJ,UAAU,CAAC,CAAC,CAAC;IAEpC,oFAAoF;IACpF,IAAII,cAAc,CAACC,MAAM,KAAK,CAAC,EAAE;QAC/B,oCAAoC;QACpCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;QAC7B,OAAOrB,KAAK,CAAA;KACb;IAED,2GAA2G;IAC3G,MAAM,CAACsB,SAAS,CAAC,GAAGJ,cAAc;IAClC,MAAMK,OAAO,GAAG7B,2BAA2B,CACzC,sBAAsB;IACtB;QAAC,EAAE;KAAC,EACJM,KAAK,CAACW,IAAI,EACVW,SAAS,CACV;IAED,IAAIC,OAAO,KAAK,IAAI,EAAE;QACpB,MAAM,IAAIC,KAAK,CAAC,kBAAkB,CAAC,CAAA;KACpC;IAED,IAAI7B,2BAA2B,CAACK,KAAK,CAACW,IAAI,EAAEY,OAAO,CAAC,EAAE;QACpD,OAAOzB,iBAAiB,CAACE,KAAK,EAAEG,OAAO,EAAEE,IAAI,EAAEL,KAAK,CAACgB,OAAO,CAACC,WAAW,CAAC,CAAA;KAC1E;IAED,MAAMQ,wBAAwB,GAAGV,oBAAoB,GACjDtB,iBAAiB,CAACsB,oBAAoB,CAAC,GACvCW,SAAS;IAEb,IAAIX,oBAAoB,EAAE;QACxBZ,OAAO,CAACG,YAAY,GAAGmB,wBAAwB;KAChD;IAED,MAAME,OAAO,GAAG9B,eAAe,CAACG,KAAK,EAAEE,KAAK,EAAEgB,cAAc,CAAC;IAE7D,IAAIS,OAAO,EAAE;QACXxB,OAAO,CAACD,KAAK,GAAGA,KAAK;KACtB;IAEDC,OAAO,CAACO,YAAY,GAAGV,KAAK,CAACW,IAAI;IACjCR,OAAO,CAACyB,WAAW,GAAGL,OAAO;IAC7BpB,OAAO,CAACG,YAAY,GAAGD,IAAI;IAE3B,OAAOT,aAAa,CAACI,KAAK,EAAEG,OAAO,CAAC,CAAA;CACrC"}