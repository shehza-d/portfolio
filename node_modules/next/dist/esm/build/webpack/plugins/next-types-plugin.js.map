{"version":3,"sources":["../../../../src/build/webpack/plugins/next-types-plugin.ts"],"names":["path","promises","fs","webpack","sources","parse","WEBPACK_LAYERS","isDynamicRoute","normalizeAppPath","denormalizePagePath","getPageFromPath","ensureLeadingSlash","PLUGIN_NAME","createTypeGuardFile","fullPath","relativePath","options","type","slots","map","slot","join","collectNamedSlots","layoutPath","layoutDir","dirname","items","readdir","withFileTypes","item","isDirectory","name","startsWith","push","slice","devPageFiles","Set","edgeRoutes","nodeRoutes","createRouteDefinitions","rewrites","redirects","extraRoutes","addExtraRoute","source","tokens","Array","isArray","normalizedRoute","token","modifier","prefix","rewrite","beforeFiles","afterFiles","fallback","redirect","length","routes","staticRouteTypes","dynamicRouteTypes","addRouteToRouteTypes","route","isDynamic","split","part","endsWith","NextTypesPlugin","constructor","dir","distDir","appDir","dev","isEdgeServer","pageExtensions","pagesDir","typedRoutes","originalRewrites","originalRedirects","collectPage","filePath","isApp","sep","test","relative","apply","compiler","distDirRelative","assetDirRelative","handleModule","_mod","assets","mod","resource","layer","server","IS_LAYOUT","IS_PAGE","relativePathToApp","relativePathToRoot","typePath","replace","relativeImportPath","assetPath","RawSource","hooks","compilation","tap","processAssets","tapAsync","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","callback","chunkGroups","forEach","chunkGroup","chunks","chunk","chunkModules","chunkGraph","getChunkModulesIterable","anyModule","modules","concatenatedMod","Promise","all","file","linkTypePath"],"mappings":"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"}