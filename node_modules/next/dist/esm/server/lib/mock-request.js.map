{"version":3,"sources":["../../../src/server/lib/mock-request.ts"],"names":["Stream","mockRequest","requestUrl","requestHeaders","requestMethod","requestConnection","resBuffers","mockRes","Writable","isStreamFinished","Promise","resolve","reject","on","err","write","chunk","push","Buffer","isBuffer","from","_write","_encoding","callback","mockHeaders","writeHead","_status","_headers","Object","assign","hasHeader","name","Boolean","toLowerCase","getHeader","getHeaders","getHeaderNames","keys","setHeader","value","removeHeader","_implicitHeader","connection","finished","statusCode","mockReq","Readable","_read","emit","headers","method","url","req","res","streamPromise"],"mappings":"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"}