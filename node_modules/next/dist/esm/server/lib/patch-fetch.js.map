{"version":3,"sources":["../../../src/server/lib/patch-fetch.ts"],"names":["AppRenderSpan","getTracer","SpanKind","CACHE_ONE_YEAR","isEdgeRuntime","process","env","NEXT_RUNTIME","patchFetch","serverHooks","staticGenerationAsyncStorage","fetch","__nextPatched","DynamicServerError","originFetch","wrap","kind","CLIENT","input","init","getRequestMeta","staticGenerationStore","getStore","isRequestInput","method","field","value","next","internal","revalidate","undefined","curRevalidate","_cache","includes","_headers","initHeaders","get","Headers","hasUnCacheableHeader","isUnCacheableMethod","toLowerCase","cacheKey","incrementalCache","fetchCacheKey","url","toString","err","console","error","requestInputFields","reqInput","reqOptions","body","_ogBody","Request","initialInit","doOriginalFetch","then","res","base64Body","resBlob","blob","arrayBuffer","encode","require","Buffer","from","set","data","headers","Object","fromEntries","entries","warn","Response","status","entry","isRevalidate","isStale","pendingRevalidates","push","catch","resData","decodedBody","decode","subarray","isStaticGeneration","cache","dynamicUsageReason","pathname","dynamicUsageStack","stack","dynamicUsageDescription","hasNextConfig","forceDynamic"],"mappings":"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"}