{"version":3,"sources":["../../../../src/server/web/sandbox/sandbox.ts"],"names":["getServerError","getModuleContext","requestToBodyStream","ErrorSource","Symbol","FORBIDDEN_HEADERS","withTaggedErrors","fn","params","then","result","waitUntil","catch","error","getRuntimeContext","runtime","evaluateInContext","moduleName","name","onWarning","useCache","env","edgeFunctionEntry","distDir","context","globalThis","__incrementalCache","incrementalCache","paramPath","paths","run","subreq","request","headers","subrequests","split","includes","Promise","resolve","response","Response","edgeFunction","_ENTRIES","default","cloned","method","body","cloneBodyStream","undefined","KUint8Array","evaluate","headerName","delete","finalize"],"mappings":"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"}