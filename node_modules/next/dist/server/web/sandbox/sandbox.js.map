{"version":3,"sources":["../../../../src/server/web/sandbox/sandbox.ts"],"names":["ErrorSource","Symbol","FORBIDDEN_HEADERS","withTaggedErrors","fn","params","then","result","waitUntil","catch","error","getServerError","getRuntimeContext","runtime","evaluateInContext","getModuleContext","moduleName","name","onWarning","useCache","env","edgeFunctionEntry","distDir","context","globalThis","__incrementalCache","incrementalCache","paramPath","paths","run","subreq","request","headers","subrequests","split","includes","Promise","resolve","response","Response","edgeFunction","_ENTRIES","default","cloned","method","body","cloneBodyStream","undefined","KUint8Array","evaluate","requestToBodyStream","headerName","delete","finalize"],"mappings":"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"}