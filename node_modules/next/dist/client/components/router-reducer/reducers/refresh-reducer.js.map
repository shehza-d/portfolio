{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/refresh-reducer.ts"],"names":["refreshReducer","state","action","cache","mutable","origin","href","canonicalUrl","isForCurrentTree","JSON","stringify","previousTree","tree","handleMutable","data","createRecordFromThenable","fetchServerResponse","URL","flightData","canonicalUrlOverride","readRecordValue","handleExternalUrl","pushRef","pendingPush","flightDataPath","length","console","log","treePatch","newTree","applyRouterStatePatchToTree","Error","isNavigatingToNewRootLayout","canonicalUrlOverrideHref","createHrefFromUrl","undefined","applied","applyFlightData","patchedTree"],"mappings":"AAAA;;;;QAiBgBA,cAAc,GAAdA,cAAc;AAjBM,IAAA,oBAA0B,WAA1B,0BAA0B,CAAA;AACrB,IAAA,yBAAgC,WAAhC,gCAAgC,CAAA;AACzC,IAAA,gBAAsB,WAAtB,sBAAsB,CAAA;AACpB,IAAA,kBAAyB,WAAzB,yBAAyB,CAAA;AACf,IAAA,4BAAqC,WAArC,qCAAqC,CAAA;AACrC,IAAA,4BAAqC,WAArC,qCAAqC,CAAA;AAU1E,IAAA,gBAAoB,WAApB,oBAAoB,CAAA;AAEpB,SAASA,cAAc,CAC5BC,KAA2B,EAC3BC,MAAqB,EACP;IACd,MAAM,EAAEC,KAAK,CAAA,EAAEC,OAAO,CAAA,EAAEC,MAAM,CAAA,EAAE,GAAGH,MAAM;IACzC,MAAMI,IAAI,GAAGL,KAAK,CAACM,YAAY;IAE/B,MAAMC,gBAAgB,GACpBC,IAAI,CAACC,SAAS,CAACN,OAAO,CAACO,YAAY,CAAC,KAAKF,IAAI,CAACC,SAAS,CAACT,KAAK,CAACW,IAAI,CAAC;IAErE,IAAIJ,gBAAgB,EAAE;QACpB,OAAOK,CAAAA,GAAAA,gBAAa,AAAgB,CAAA,cAAhB,CAACZ,KAAK,EAAEG,OAAO,CAAC,CAAA;KACrC;IAED,IAAI,CAACD,KAAK,CAACW,IAAI,EAAE;QACf,uDAAuD;QACvD,wCAAwC;QACxCX,KAAK,CAACW,IAAI,GAAGC,CAAAA,GAAAA,yBAAwB,AAOpC,CAAA,yBAPoC,CACnCC,CAAAA,GAAAA,oBAAmB,AAKjB,CAAA,oBALiB,CAAC,IAAIC,GAAG,CAACX,IAAI,EAAED,MAAM,CAAC,EAAE;YACzCJ,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YACbX,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YACbX,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC;YACb,SAAS;SACV,CAAC,CACH;KACF;IACD,MAAM,CAACM,UAAU,EAAEC,oBAAoB,CAAC,GAAGC,CAAAA,GAAAA,gBAAe,AAAa,CAAA,gBAAb,CAACjB,KAAK,CAACW,IAAI,CAAE;IAEvE,4DAA4D;IAC5D,IAAI,OAAOI,UAAU,KAAK,QAAQ,EAAE;QAClC,OAAOG,CAAAA,GAAAA,gBAAiB,AAKvB,CAAA,kBALuB,CACtBpB,KAAK,EACLG,OAAO,EACPc,UAAU,EACVjB,KAAK,CAACqB,OAAO,CAACC,WAAW,CAC1B,CAAA;KACF;IAED,2DAA2D;IAC3DpB,KAAK,CAACW,IAAI,GAAG,IAAI;IAEjB,2GAA2G;IAC3G,MAAMU,cAAc,GAAGN,UAAU,CAAC,CAAC,CAAC;IAEpC,oFAAoF;IACpF,IAAIM,cAAc,CAACC,MAAM,KAAK,CAAC,EAAE;QAC/B,oCAAoC;QACpCC,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;QAC7B,OAAO1B,KAAK,CAAA;KACb;IAED,2GAA2G;IAC3G,MAAM,CAAC2B,SAAS,CAAC,GAAGJ,cAAc;IAClC,MAAMK,OAAO,GAAGC,CAAAA,GAAAA,4BAA2B,AAK1C,CAAA,4BAL0C,CACzC,sBAAsB;IACtB;QAAC,EAAE;KAAC,EACJ7B,KAAK,CAACW,IAAI,EACVgB,SAAS,CACV;IAED,IAAIC,OAAO,KAAK,IAAI,EAAE;QACpB,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC,CAAA;KACpC;IAED,IAAIC,CAAAA,GAAAA,4BAA2B,AAAqB,CAAA,4BAArB,CAAC/B,KAAK,CAACW,IAAI,EAAEiB,OAAO,CAAC,EAAE;QACpD,OAAOR,CAAAA,GAAAA,gBAAiB,AAAiD,CAAA,kBAAjD,CAACpB,KAAK,EAAEG,OAAO,EAAEE,IAAI,EAAEL,KAAK,CAACqB,OAAO,CAACC,WAAW,CAAC,CAAA;KAC1E;IAED,MAAMU,wBAAwB,GAAGd,oBAAoB,GACjDe,CAAAA,GAAAA,kBAAiB,AAAsB,CAAA,kBAAtB,CAACf,oBAAoB,CAAC,GACvCgB,SAAS;IAEb,IAAIhB,oBAAoB,EAAE;QACxBf,OAAO,CAACG,YAAY,GAAG0B,wBAAwB;KAChD;IAED,MAAMG,OAAO,GAAGC,CAAAA,GAAAA,gBAAe,AAA8B,CAAA,gBAA9B,CAACpC,KAAK,EAAEE,KAAK,EAAEqB,cAAc,CAAC;IAE7D,IAAIY,OAAO,EAAE;QACXhC,OAAO,CAACD,KAAK,GAAGA,KAAK;KACtB;IAEDC,OAAO,CAACO,YAAY,GAAGV,KAAK,CAACW,IAAI;IACjCR,OAAO,CAACkC,WAAW,GAAGT,OAAO;IAC7BzB,OAAO,CAACG,YAAY,GAAGD,IAAI;IAE3B,OAAOO,CAAAA,GAAAA,gBAAa,AAAgB,CAAA,cAAhB,CAACZ,KAAK,EAAEG,OAAO,CAAC,CAAA;CACrC"}