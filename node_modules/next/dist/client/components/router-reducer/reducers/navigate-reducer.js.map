{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/navigate-reducer.ts"],"names":["handleMutable","applyFlightData","handleExternalUrl","navigateReducer","state","mutable","canonicalUrl","pushRef","pendingPush","mpaNavigation","focusAndScrollRef","apply","applyFocusAndScroll","cache","prefetchCache","tree","patchedTree","flightDataPath","treePatch","subTreeData","head","slice","length","status","CacheStates","READY","fillLazyItemsTillLeafWithHead","fillCacheWithNewSubTreeData","url","previousTree","action","isExternalUrl","locationSearch","navigateType","forceOptimisticNavigation","pathname","search","href","createHrefFromUrl","isForCurrentTree","JSON","stringify","toString","prefetchValues","get","flightData","newTree","canonicalUrlOverride","isNavigatingToNewRootLayout","flightSegmentPath","applied","hardNavigate","shouldHardNavigate","invalidateCacheBelowFlightSegmentPath","segments","split","push","optimisticTree","createOptimisticTree","res","fillCacheWithDataProperty","fetchServerResponse","bailOptimistic","data","createRecordFromThenable","readRecordValue","applyRouterStatePatchToTree","Error"],"mappings":"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"}